#include<iostream>
#include<string>
using namespace std;


int main(){
	char a[100][100];
	int w,h;
	cin>>w>>h;
	int x,y;
	int count=0;
	for(int i=0;i<h;i++){
		string s;
		cin>>s;
		for(int j=0;j<w;j++){
			a[i][j]=s[j];
			if(s[j]=='U') {
				x=j+1;
				y=i+1;
			}
		}
	}
	int p;
	cin>>p;
	char b[1000];
	for(int i=0;i<p;i++){
		cin>>b[i];
	}
	for(int i=0;i<h;i++){
		for(int j=0;j<w;j++){
			for(int k=0;k<p;k++){
				if(b[k]=='W'&&a[i][j-1]=='.') j--;
				if(b[k]=='E'&&a[i][j+1]=='.') j++;
				if(b[k]=='N'&&a[i-1][j]=='.') i--;
				if(b[k]=='s'&&a[i+1][j]=='.') i++;
			}
		if (i==x&&j==y) count++;
		}
	}
	cout<<count;
} 
